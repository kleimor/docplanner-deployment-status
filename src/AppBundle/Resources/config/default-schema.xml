<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE database SYSTEM "../../../../../vendor/propel/propel/resources/dtd/database.dtd">
<database name="default"
		  namespace="AppBundle\Model"
		  package="src.AppBundle.Model"
		  defaultIdMethod="native"
		  identifierQuoting="true"
>
	<table name="project" idMethod="native">
		<column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
		<column name="name" type="LONGVARCHAR" required="true"/>
		<column name="repository_owner" type="VARCHAR" size="255" required="true">
			<vendor type="mysql">
				<parameter name="Charset" value="ascii"/>
				<parameter name="Collate" value="ascii_general_ci"/>
			</vendor>
		</column>
		<column name="repository_name" type="VARCHAR" size="255" required="true">
			<vendor type="mysql">
				<parameter name="Charset" value="ascii"/>
				<parameter name="Collate" value="ascii_general_ci"/>
			</vendor>
		</column>
		<column name="repository_uri" type="VARCHAR" size="255" required="true"/>

		<unique name="repository_owner_repository_name">
			<unique-column name="repository_owner"/>
			<unique-column name="repository_name"/>
		</unique>
	</table>

	<table name="stage" idMethod="native">
		<column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
		<column name="project_id" type="INTEGER" required="true"/>
		<column name="name" type="VARCHAR" size="255" required="true"/>
		<column name="tracked_branch" type="VARCHAR" size="255" required="true">
			<vendor type="mysql">
				<parameter name="Charset" value="ascii"/>
				<parameter name="Collate" value="ascii_general_ci"/>
			</vendor>
		</column>

		<foreign-key foreignTable="project" name="stage_FK1" onUpdate="CASCADE">
			<reference local="project_id" foreign="id"/>
		</foreign-key>

		<index name="project_id">
			<index-column name="project_id"/>
		</index>

		<unique name="project_id_name">
			<unique-column name="project_id"/>
			<unique-column name="name"/>
		</unique>
	</table>

	<vendor type="mysql">
		<parameter name="Engine" value="InnoDB"/>
		<parameter name="Charset" value="utf8mb4"/>
		<parameter name="Collate" value="utf8mb4_general_ci"/>
	</vendor>
</database>
